<Page
    x:Class="UWPExamProject.Pages.WebHttp"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:UWPExamProject.Pages"
    xmlns:localHttp="using:UWPExamProject"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid Padding="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="3*"/>
        </Grid.ColumnDefinitions>

        <StackPanel Orientation="Horizontal"
                    Spacing="10"
                    Margin="0,0,0,15"
                    Grid.Row="0"
                    Grid.Column="0"
                    Grid.ColumnSpan="2"
                    HorizontalAlignment="Center">

            <Button Content="🌐 HTTP GET"
                    Name="btnTestWebHttp"
                    Click="btnTestWebHttp_Click"
                    Background="#6A0DAD"
                    Foreground="White"
                    Padding="10,6"
                    BorderThickness="0"/>

            <Button Content="⏪ Prev"
                    Name="btnPrevPage"
                    Click="btnPrevPage_Click"
                    IsEnabled="False"
                    Padding="10,6"/>

            <TextBlock x:Name="txtPageInfo"
                       VerticalAlignment="Center"
                       FontSize="14"
                       FontWeight="SemiBold"
                       Foreground="#444"
                       Margin="8,0"
                       Text="Page 0 / 0"/>

            <Button Content="Next ⏩"
                    Name="btnNextPage"
                    Click="btnNextPage_Click"
                    IsEnabled="False"
                    Padding="10,6"/>
        </StackPanel>

        <Border Grid.Row="1"
                Grid.Column="0"
                Background="#413f54"
                BorderBrush="#CCC"
                BorderThickness="1"
                CornerRadius="6"
                Padding="10"
                Margin="0,0,10,0">
            <ListView x:Name="lstWebJsonComments"
                      SelectionChanged="lstWebJsonComments_SelectionChanged"
                      VerticalAlignment="Stretch"
                      Background="Transparent">

                <ListView.Header>
                    <TextBlock Text="People &amp; Homeworlds"
                               FontSize="18"
                               FontWeight="SemiBold"
                               Foreground="#E0E0E0"
                               Margin="6,4,6,10"/>
                </ListView.Header>

                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="local:SWCharacter">
                        <StackPanel Margin="4,0,4,10"
                                    Orientation="Vertical"
                                    Spacing="4"
                                    BorderBrush="#666"
                                    BorderThickness="0,0,0,1"
                                    Padding="0,0,0,8">
                            <TextBlock Text="{x:Bind name}"
                                       FontWeight="SemiBold"
                                       FontSize="15"
                                       Foreground="White"/>
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <TextBlock Foreground="#D0D0D0">
                                    <Run Text="🚻"/>
                                    <Run Text="{x:Bind gender}"/>
                                </TextBlock>
                                <TextBlock Foreground="#D0D0D0">
                                    <Run Text="📅"/>
                                    <Run Text="{x:Bind birth_year}"/>
                                </TextBlock>
                            </StackPanel>
                            
                            <TextBlock Text="Homeworld"
                                       FontWeight="Bold"
                                       Foreground="#E0E0E0"
                                       Margin="0,6,0,2"/>
                            <StackPanel Margin="10,0,0,0" Spacing="2">
                                <TextBlock Foreground="White">
                                    <Run Text="🌍 Planet: "/>
                                    <Run Text="{x:Bind homeworldRecord.name, FallbackValue='Loading...'}"/>
                                </TextBlock>
                                <TextBlock TextWrapping="WrapWholeWords" Foreground="White">
                                    <Run Text="🏔 Terrain: "/>
                                    <Run Text="{x:Bind homeworldRecord.terrain, FallbackValue='...'}"/>
                                </TextBlock>
                                <TextBlock Foreground="White">
                                    <Run Text="🪐 Gravity: "/>
                                    <Run Text="{x:Bind homeworldRecord.gravity, FallbackValue='...'}"/>
                                </TextBlock>
                                <TextBlock Foreground="White">
                                    <Run Text="👥 Population: "/>
                                    <Run Text="{x:Bind homeworldRecord.population, FallbackValue='...'}"/>
                                </TextBlock>
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Border>

        <Border Grid.Row="1"
                Grid.Column="1"
                Background="#413f54"
                BorderBrush="#CCC"
                BorderThickness="1"
                CornerRadius="6"
                Padding="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0"
                           Text="Starships"
                           FontSize="18"
                           FontWeight="SemiBold"
                           Foreground="#E0E0E0"
                           Margin="6,4,6,10"/>
                <StackPanel Grid.Row="1"
                            Orientation="Horizontal"
                            VerticalAlignment="Center"
                            Margin="6,0,0,8"
                            Spacing="8">

                    <TextBlock Text="{Binding SelectedItem.name, ElementName=lstWebJsonComments}"
                               FontStyle="Italic"
                               Foreground="#D0D0D0"/>
                    
                    <ProgressRing x:Name="prgStarships"
                                  Width="22"
                                  Height="22"
                                  IsActive="False"
                                  Visibility="Collapsed"/>
                </StackPanel>

                <ListView x:Name="lstStarships"
                          Grid.Row="2"
                          VerticalAlignment="Stretch"
                          Background="Transparent">

                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="local:Starship">
                            <Border BorderThickness="0,0,0,1"
                                    BorderBrush="#666"
                                    Padding="4,6">
                                <StackPanel Orientation="Vertical" Spacing="2">
                                    <TextBlock Text="Starship"
                                        FontWeight="Bold"
                                        Foreground="#E0E0E0"
                                        Margin="0,6,0,2"/>

                                    <StackPanel Margin="10,0,0,0" Spacing="2">
                                        <TextBlock Foreground="White">
                                            <Run Text="🚀 Name: "/>
                                            <Run Text="{x:Bind name, FallbackValue='Loading...'}"/>
                                        </TextBlock>

                                        <TextBlock Foreground="White">
                                            <Run Text="📋 Model: "/>
                                            <Run Text="{x:Bind model, FallbackValue='Loading...'}"/>
                                        </TextBlock>

                                        <TextBlock Foreground="White">
                                            <Run Text="⚙️ Manufacturer: "/>
                                            <Run Text="{x:Bind manufacturer, FallbackValue='Loading...'}"/>
                                        </TextBlock>

                                        <TextBlock Foreground="White">
                                            <Run Text="⚜️ Class: "/>
                                            <Run Text="{x:Bind starship_class, FallbackValue='Loading...'}"/>
                                        </TextBlock>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </Grid>
        </Border>
    </Grid>
</Page>